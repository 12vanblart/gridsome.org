# Collections

> A collection is a group of nodes and each node can contain fields with custom data. Collections are useful if you are going to have blog posts, tags, products etc. on your site.

## Adding a collection

Collections can be added by [source plugins]() or you can do it yourself with the [Data Store API](/docs/data-store-api). The collections are stored in a local in-memory data store during `development` and `build`. Nodes can be **sourced** from local files (Markdown, JSON, YAML etc.) or any external APIs.

![Collections](./images/node-pages.png)

This examples creates a collection with the **Data Store API**:

```js
const axios = require('axios')

module.exports = function (api) {
  api.loadSource(async actions => {
    const { data } = await axios.get('https://api.example.com/posts')

    const collection = actions.addCollection('Post')

    for (const item of data) {
      collection.addNode({
        id: item.id,
        title: item.title,
        content: item.content
      })
    }
  })
}
```

Learn more about the [Data Store API](/docs/data-store-api).

## Collections and GraphQL

Each collection will add two root fields to the [GraphQL schema](/docs/data-layer) that are used to retrieve nodes in your components. The field names are autogenerated based on the collection name. If you name the collection `Post`, you will have these fields available in the schema:

- `post` Get a single node by `id`.
- `allPost` Get a list of nodes. *(Can be sorted and filtered.)*

You can browse available fields by opening the **schema** tab in the [GraphQL explorer](/docs/data-layer#the-graphql-explorer).

### Retrieve a list of nodes

This example retrieves all nodes from the `Post` collection and shows their titles in a list:

```html
<template>
  <ul>
    <li v-for="edge in $page.allPost.edges" :key="edge.node.id">
      {{ edge.node.title }}
    </li>
  </ul>
</template>

<page-query>
query AllPosts {
  allPost {
    edges {
      node {
        id
        title
      }
    }
  }
}
</page-query>
```

### Retrieve a single node

Get a single node by setting an `id` [argument](https://graphql.org/learn/queries/#arguments) on the single node field.

```html
<template>
  <div>
  	<h1 v-html="$page.post.title" />
  	<div v-html="$page.post.content" />
  </div>
</template>

<page-query>
query Post {
  post(id: "1") {
    title
    content
  }
}
</page-query>
```

## Generate pages for nodes

In order to display collection nodes on their own URLs, you must create pages for them. Gridsome can do it for you automatically by utilizing the `collectionRoutes` configuration. Use the collection name as property.

Available route options are:

- **path** - Define a dynamic route and use any node field as parameters.

- **component** - Specify a component to use as template for each page. A component located at `src/templates/{collection}.vue` will be used by default.

```js
// gridsome.config.js
module.exports = {
  collectionRoutes: {
  	Post: '/blog/:year/:month/:title',
    Tag: {
      path: '/tags/:title',
      component: './src/other/location/Tag.vue'
    }
	}
}
```

Parameters are slugified by default, but the original value can be used by adding a `_raw` suffix, eg. `:title_raw`. Access values in deep objects or arrays by separating properties or indexes with double underscores (`__`). The `date` field has a set of shorthand helpers; `:year`, `:month` and `:day`.

- `:id` resolves to `node.id`
- `:value` resolves to `node.value` *(slugified value)*
- `:value_raw` resolves to `node.value` *(original value)*
- `:object__value` resolves to `node.object.value`
- `:array__3__id` resolves to `node.array[3].id`

You can also create pages manually by using the [Pages API](/docs/pages-api#create-pages-from-graphql).

### Retrieve the current node

Components for pages generated from the `collectionRoutes` configuration will have the node `id` available as a [query variable](https://graphql.org/learn/queries/#variables) in the `page-query` block. Use the `id` to get the node for the current page:

```html
<template>
  <div>
  	<h1 v-html="$page.post.title" />
  	<div v-html="$page.post.content" />
  </div>
</template>

<page-query>
query Post($id: ID!) {
  post(id: $id) {
    title
    content
  }
}
</page-query>
```

Other node fields are also available as query variables. Access values in deep objects or arrays by separating properties or indexes with double underscores (`__`).

- `$id` resolves to `node.id`
- `$value` resolves to `node.value`
- `$object__value` resolves to `node.object.value`
- `$array__3__id` resolves to `node.array[3].id`

### Using query results as meta info

The `metaInfo` option must be a function in order to access the query results:

```html
<script>
export default {
  metaInfo () {
    return {
      title: this.$page.post.title
    }
  }
}
</script>
```
